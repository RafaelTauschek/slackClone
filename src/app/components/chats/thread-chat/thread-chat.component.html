<div class="thread-chat-section">
    <div class="message-container">

        <ng-container *ngIf="sharedService.getMessageAlignment(data.message.senderId); else leftMessage">
            <div class="message-container-right">
                <div class="message-content">
                    <div class="message-header">
                        <span class="time">{{ sharedService.formatTimestampToTime(data.message.timestamp) }} Uhr</span>
                        <span class="user-name">{{ data.getUserProperty(data.message.senderId, 'name') }}</span>
                    </div>
                    <div class="message-main">
                        <span>{{ data.message.content }}</span>
                    </div>
                </div>
                <img class="single-user-avatar" [src]="data.getProfilePictureURL(data.message.senderId)" alt="avatar">
            </div>
        </ng-container>

        <ng-template #leftMessage>
            <div class="message-container-left">
                <img class="single-user-avatar" [src]="data.getProfilePictureURL(data.message.senderId)" alt="avatar">
                <div class="message-content">
                    <div class="message-header">
                        <span class="user-name">{{ data.getUserProperty(data.message.senderId, 'name') }}</span>
                        <span class="time">{{ sharedService.formatTimestampToTime(data.message.timestamp) }} Uhr</span>
                    </div>
                    <div class="message-main">
                        <span>{{ data.message.content }}</span>
                    </div>
                </div>
            </div>
        </ng-template>

    </div>

    <div class="answer-divider" *ngIf="data.message.answers[0]">
        <span>{{ data.message.answers.length }} Antworten</span>
        <img src="./assets/img/line.png" alt="line">
    </div>

    <div class="answer-container">
        <div class="answer" *ngFor="let answer of data.message.answers">
            <ng-container *ngIf="sharedService.getMessageAlignment(answer.senderId); else leftContainer">
                <div class="answer-container-right">
                    <div class="answer-content">
                        <div class="answer-header">
                            <span class="time">{{ sharedService.formatTimestampToTime(answer.timestamp) }} Uhr</span>
                            <span class="user-name">{{ data.getUserProperty(answer.senderId , 'name') }}</span>
                        </div>
                        <div class="answer-main">
                            <div class="editing-container" *ngIf="edit && answer.editMessage">
                                <textarea name="message" [(ngModel)]="messageContent"></textarea>
                                <div class="editing-footer">
                                    <img src="./assets/img/icons/smiley-icon.png" alt="smiley-icon">
                                    <div class="editing-btn-container">
                                        <button class="cancel-btn" (click)="cancelEditing(answer)">Abbrechen</button>
                                        <button class="save-btn" (click)="saveChanges(answer)">Speichern</button>
                                    </div>
                                </div>
                            </div>
                            <span *ngIf="!(edit && answer.editMessage)">{{ answer.content }}</span>
                        </div>
                    </div>
                    <img [src]="data.getProfilePictureURL(answer.senderId)" alt="avatar">
                    <div class="message-overlay">
                        <img (click)="toggleEmojiPicker(answer)" src="./assets/img/icons/add-emoji-icon.png" alt="smiley-icon">
                        <img (click)="toggleEditMenu(answer)" src="./assets/img/icons/three-point-icon.png" alt="vert-icon">
                    </div>
                    <span *ngIf="editMenu && answer.editMessage" (click)="editMessage(answer)" class="edit-menu">Nachricht bearbeiten</span>
                </div>
            </ng-container>

            <ng-template #leftContainer>
                <div class="answer-container-left">
                    <img [src]="data.getProfilePictureURL(answer.senderId)" alt="avatar">
                    <div class="answer-content">
                        <div class="answer-header">
                            <span class="user-name">{{ data.getUserProperty(answer.senderId , 'name') }}</span>
                            <span class="time">{{ sharedService.formatTimestampToTime(answer.timestamp) }} Uhr</span>
                        </div>
                        <div class="answer-main">
                            <span>{{ answer.content }}</span>
                        </div>
                    </div>
                    <div class="message-overlay">
                        <img (click)="toggleEmojiPicker(answer)" src="./assets/img/icons/add-emoji-icon.png" alt="smiley-icon">
                    </div>
                </div>
            </ng-template>
        </div>
        <div class="emoji-picker" *ngIf="showEmojiPicker">
            <emoji-mart noCountryFlags="true" class="emoji-mart" (emojiClick)="addEmoji($event)"></emoji-mart>
        </div>
    </div>